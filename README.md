# Worker Pool

##  –û –ø—Ä–æ–≥—Ä–∞–º–º–µ

–≠—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ worker pool** –Ω–∞ Go, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∞—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —Å–∏—Å—Ç–µ–º. –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á –≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –≤ runtime.

## –ü—Å—Ä–æ—Ç–∞—è —Å—Ö–µ–º–∞

![image](https://github.com/user-attachments/assets/ec284a3b-9ed5-4069-a26e-555db5745d09)


##  –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞–º–∏**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- **–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π shutdown**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö –≥–æ—Ä—É—Ç–∏–Ω
- **–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**: –≥–∏–±–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥
- **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¥–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã

##  –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### SOLID
- **Single Responsibility**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Worker, Pool, Task) –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- **Open/Closed**: –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (Logger, Processor)
- **Liskov Substitution**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π –ª–æ–≥–≥–µ—Ä—ã –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã
- **Interface Segregation**: –ú–∞–ª–µ–Ω—å–∫–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **Dependency Inversion**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–Ω–µ–¥—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### –î—Ä—É–≥–∏–µ –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- **Dependency Injection**: –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
- **Concurrency Patterns**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –∏ sync –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤
- **Graceful Degradation**: –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –æ—à–∏–±–∫–∞–º

1. **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: sync.Mutex, atomic –æ–ø–µ—Ä–∞—Ü–∏–∏
2. **–†–µ—Å—É—Ä—Å–æ–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: context –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

##  –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã (–∏–∑ –ª–æ–≥–æ–≤)

![image](https://github.com/user-attachments/assets/310cd7ff-8321-4c3e-b875-1072a70a4e65)
![image](https://github.com/user-attachments/assets/9083a7a1-2eb1-426d-ab58-a325b2d04a15)




```
–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–æ–≤
–í–æ—Ç –∫–ª—é—á–µ–≤—ã–µ —ç—Ç–∞–ø—ã:

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (3 –≤–æ—Ä–∫–µ—Ä–∞)
–°–æ–∑–¥–∞–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã –≤–æ—Ä–∫–µ—Ä—ã 1, 2, 3

–ö–∞–∂–¥—ã–π –≤–æ—Ä–∫–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ

2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á (–ø–µ—Ä–≤—ã–µ 10)
–ó–∞–¥–∞—á–∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –≤–æ—Ä–∫–µ—Ä–∞–º–∏

–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è ~100–º—Å (–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞)

3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (+5 –≤–æ—Ä–∫–µ—Ä–æ–≤)
–î–æ–±–∞–≤–ª–µ–Ω—ã –≤–æ—Ä–∫–µ—Ä—ã 4-8

–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ —Å—Ç–∞–ª–æ 8

–ù–æ–≤—ã–µ –≤–æ—Ä–∫–µ—Ä—ã —Å—Ä–∞–∑—É –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ —Ä–∞–±–æ—Ç—É

4. –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–¥–æ 30 –∑–∞–¥–∞—á)
–£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –ø—É–ª —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π

–ó–∞–¥–∞—á–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ

5. –£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø—É–ª–∞ (-1 –≤–æ—Ä–∫–µ—Ä)
–í–æ—Ä–∫–µ—Ä 1 –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É

–û—Å—Ç–∞–ª—å–Ω—ã–µ –≤–æ—Ä–∫–µ—Ä—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É

6.  shutdown (–ø–æ Ctrl+C)
–í—Å–µ –≤–æ—Ä–∫–µ—Ä—ã –ø–æ–ª—É—á–∞—é—Ç —Å–∏–≥–Ω–∞–ª –æ—Ç–º–µ–Ω—ã

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

–†–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```


## üõ† –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
git clone https://github.com/wehw93/worker_pool
cd worker_pool
go mod tidy
make
./main
```

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `config.yaml`(–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): 
```yaml
worker_pool:
  initial_worker_count: 3
  buffer_size: 100
  shutdown_timeout: 10s
  
logger:
  level: "info"  # debug, info, error
  prefix: "[WORKER-POOL] "
```

